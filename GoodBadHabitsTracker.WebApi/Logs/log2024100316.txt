2024-10-03 16:21:29.877 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:21:29.909 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:21:29.927 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:21:29.947 +02:00 [DBG] Hosting starting
2024-10-03 16:21:29.956 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:21:29.960 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:21:29.966 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:21:29.968 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:21:29.969 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:21:29.970 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:21:29.972 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:21:29.974 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:21:29.976 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:21:29.977 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:21:30.028 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:21:30.029 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:21:30.030 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:21:30.030 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:21:30.031 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:21:30.031 +02:00 [INF] Hosting environment: Production
2024-10-03 16:21:30.032 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:21:30.032 +02:00 [DBG] Hosting started
2024-10-03 16:21:30.109 +02:00 [DBG] Connection id "0HN73MQMBH1FE" accepted.
2024-10-03 16:21:30.111 +02:00 [DBG] Connection id "0HN73MQMBH1FE" started.
2024-10-03 16:21:30.116 +02:00 [DBG] Connection id "0HN73MQMBH1FF" accepted.
2024-10-03 16:21:30.117 +02:00 [DBG] Connection id "0HN73MQMBH1FF" started.
2024-10-03 16:21:30.153 +02:00 [DBG] Connection id "0HN73MQMBH1FE" received FIN.
2024-10-03 16:21:30.153 +02:00 [DBG] Connection id "0HN73MQMBH1FF" received FIN.
2024-10-03 16:21:30.158 +02:00 [DBG] Connection id "0HN73MQMBH1FG" accepted.
2024-10-03 16:21:30.157 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:21:30.157 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:21:30.159 +02:00 [DBG] Connection id "0HN73MQMBH1FG" started.
2024-10-03 16:21:30.166 +02:00 [DBG] Connection id "0HN73MQMBH1FE" stopped.
2024-10-03 16:21:30.166 +02:00 [DBG] Connection id "0HN73MQMBH1FF" stopped.
2024-10-03 16:21:30.167 +02:00 [DBG] Connection id "0HN73MQMBH1FE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:21:30.167 +02:00 [DBG] Connection id "0HN73MQMBH1FF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:21:30.181 +02:00 [DBG] Connection 0HN73MQMBH1FG established using the following protocol: "Tls13"
2024-10-03 16:21:30.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7154/swagger/index.html - null null
2024-10-03 16:21:30.248 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:21:30.251 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:21:30.261 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-10-03 16:21:30.262 +02:00 [DBG] Request did not match any endpoints
2024-10-03 16:21:30.284 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:21:30.287 +02:00 [INF] HTTP GET /swagger/index.html responded 404 in 36.5454 ms
2024-10-03 16:21:30.291 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7154/swagger/index.html - 404 0 null 92.6098ms
2024-10-03 16:21:30.294 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7154/swagger/index.html, Response status code: 404
2024-10-03 16:21:49.855 +02:00 [DBG] Connection id "0HN73MQMBH1FH" accepted.
2024-10-03 16:21:49.856 +02:00 [DBG] Connection id "0HN73MQMBH1FH" started.
2024-10-03 16:21:49.857 +02:00 [DBG] Connection id "0HN73MQMBH1FH" received FIN.
2024-10-03 16:21:49.857 +02:00 [DBG] Connection id "0HN73MQMBH1FI" accepted.
2024-10-03 16:21:49.858 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:21:49.858 +02:00 [DBG] Connection id "0HN73MQMBH1FI" started.
2024-10-03 16:21:49.859 +02:00 [DBG] Connection id "0HN73MQMBH1FH" stopped.
2024-10-03 16:21:49.860 +02:00 [DBG] Connection id "0HN73MQMBH1FH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:21:49.862 +02:00 [DBG] Connection 0HN73MQMBH1FI established using the following protocol: "Tls13"
2024-10-03 16:21:49.865 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:21:49.867 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:21:49.869 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:21:49.871 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:21:49.872 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:21:49.874 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:21:49.875 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:21:49.895 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:21:49.897 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:21:49.898 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:21:49.899 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:21:49.900 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:21:49.901 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:21:49.903 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:21:49.904 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:21:49.911 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:21:49.914 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:21:49.916 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:21:49.916 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:21:49.917 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:21:49.919 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:21:49.920 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:21:49.921 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:21:49.922 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:21:49.923 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:21:50.046 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:21:50.455 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:21:50.457 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:21:50.652 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: None
2024-10-03 16:21:50.665 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 761.7159ms
2024-10-03 16:21:50.667 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:21:50.667 +02:00 [ERR] Exception occurred: The given key 'ReadHabit' was not present in the dictionary.
System.Collections.Generic.KeyNotFoundException: The given key 'ReadHabit' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:21:50.694 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 827.4081 ms
2024-10-03 16:21:50.696 +02:00 [DBG] Connection id "0HN73MQMBH1FI" completed keep alive response.
2024-10-03 16:21:50.698 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:21:50.701 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 835.4168ms
2024-10-03 16:22:33.546 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:22:33.573 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:22:33.594 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:22:33.613 +02:00 [DBG] Hosting starting
2024-10-03 16:22:33.621 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:22:33.626 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:22:33.629 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:22:33.631 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:22:33.633 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:22:33.634 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:22:33.636 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:22:33.638 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:22:33.639 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:22:33.640 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:22:33.688 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:22:33.688 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:22:33.689 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:22:33.689 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:22:33.690 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:22:33.690 +02:00 [INF] Hosting environment: Production
2024-10-03 16:22:33.691 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:22:33.691 +02:00 [DBG] Hosting started
2024-10-03 16:22:33.747 +02:00 [DBG] Connection id "0HN73MR9ADOFA" received FIN.
2024-10-03 16:22:33.747 +02:00 [DBG] Connection id "0HN73MR9ADOFB" received FIN.
2024-10-03 16:22:33.751 +02:00 [DBG] Connection id "0HN73MR9ADOFA" accepted.
2024-10-03 16:22:33.751 +02:00 [DBG] Connection id "0HN73MR9ADOFB" accepted.
2024-10-03 16:22:33.752 +02:00 [DBG] Connection id "0HN73MR9ADOFA" started.
2024-10-03 16:22:33.753 +02:00 [DBG] Connection id "0HN73MR9ADOFB" started.
2024-10-03 16:22:33.757 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:22:33.757 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:22:33.762 +02:00 [DBG] Connection id "0HN73MR9ADOFA" stopped.
2024-10-03 16:22:33.762 +02:00 [DBG] Connection id "0HN73MR9ADOFB" stopped.
2024-10-03 16:22:33.764 +02:00 [DBG] Connection id "0HN73MR9ADOFA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:22:33.764 +02:00 [DBG] Connection id "0HN73MR9ADOFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:22:35.982 +02:00 [DBG] Connection id "0HN73MR9ADOFC" received FIN.
2024-10-03 16:22:35.982 +02:00 [DBG] Connection id "0HN73MR9ADOFC" accepted.
2024-10-03 16:22:35.983 +02:00 [DBG] Connection id "0HN73MR9ADOFC" started.
2024-10-03 16:22:35.983 +02:00 [DBG] Connection id "0HN73MR9ADOFD" accepted.
2024-10-03 16:22:35.984 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:22:35.985 +02:00 [DBG] Connection id "0HN73MR9ADOFD" started.
2024-10-03 16:22:35.987 +02:00 [DBG] Connection id "0HN73MR9ADOFC" stopped.
2024-10-03 16:22:35.989 +02:00 [DBG] Connection id "0HN73MR9ADOFC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:22:36.009 +02:00 [DBG] Connection 0HN73MR9ADOFD established using the following protocol: "Tls13"
2024-10-03 16:22:36.025 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:22:36.031 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:22:36.034 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:22:36.043 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:22:36.045 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:22:36.048 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:22:36.059 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:22:36.061 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:22:36.074 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:22:36.077 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:22:36.078 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:22:36.080 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:22:36.081 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:22:36.083 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:22:36.085 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:22:36.086 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:22:36.090 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:22:36.091 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:22:36.093 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:22:36.094 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:22:36.095 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:22:36.096 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:22:36.098 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:22:36.099 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:22:36.101 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:22:36.102 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:22:36.166 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:22:36.442 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:22:36.443 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:22:36.575 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: None
2024-10-03 16:22:36.584 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 498.3365ms
2024-10-03 16:22:36.586 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:22:36.587 +02:00 [ERR] Exception occurred: The given key 'ReadHabitById' was not present in the dictionary.
System.Collections.Generic.KeyNotFoundException: The given key 'ReadHabitById' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:22:36.609 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 576.1644 ms
2024-10-03 16:22:36.611 +02:00 [DBG] Connection id "0HN73MR9ADOFD" completed keep alive response.
2024-10-03 16:22:36.615 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:22:36.618 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 593.3246ms
2024-10-03 16:23:37.379 +02:00 [DBG] Config reload token fired. Checking for changes...
2024-10-03 16:23:37.641 +02:00 [DBG] Config reload token fired. Checking for changes...
2024-10-03 16:23:43.786 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:23:43.814 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:23:43.833 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:23:43.853 +02:00 [DBG] Hosting starting
2024-10-03 16:23:43.861 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:23:43.866 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:23:43.870 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:23:43.872 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:23:43.873 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:23:43.874 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:23:43.876 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:23:43.878 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:23:43.880 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:23:43.881 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:23:43.931 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:23:43.932 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:23:43.932 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:23:43.933 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:23:43.934 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:23:43.934 +02:00 [INF] Hosting environment: Production
2024-10-03 16:23:43.935 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:23:43.935 +02:00 [DBG] Hosting started
2024-10-03 16:23:43.993 +02:00 [DBG] Connection id "0HN73MRU8B8SQ" received FIN.
2024-10-03 16:23:43.998 +02:00 [DBG] Connection id "0HN73MRU8B8SQ" accepted.
2024-10-03 16:23:44.000 +02:00 [DBG] Connection id "0HN73MRU8B8SQ" started.
2024-10-03 16:23:44.005 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:23:44.011 +02:00 [DBG] Connection id "0HN73MRU8B8SQ" stopped.
2024-10-03 16:23:44.012 +02:00 [DBG] Connection id "0HN73MRU8B8SQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:23:44.087 +02:00 [DBG] Connection id "0HN73MRU8B8SR" accepted.
2024-10-03 16:23:44.089 +02:00 [DBG] Connection id "0HN73MRU8B8SR" started.
2024-10-03 16:23:44.106 +02:00 [DBG] Connection 0HN73MRU8B8SR established using the following protocol: "Tls13"
2024-10-03 16:23:44.127 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7154/swagger/index.html - null null
2024-10-03 16:23:44.140 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:23:44.142 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:23:44.150 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-10-03 16:23:44.151 +02:00 [DBG] Request did not match any endpoints
2024-10-03 16:23:44.161 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:23:44.163 +02:00 [INF] HTTP GET /swagger/index.html responded 404 in 21.6338 ms
2024-10-03 16:23:44.169 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7154/swagger/index.html - 404 0 null 42.5099ms
2024-10-03 16:23:44.173 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7154/swagger/index.html, Response status code: 404
2024-10-03 16:23:51.655 +02:00 [DBG] Connection id "0HN73MRU8B8SS" accepted.
2024-10-03 16:23:51.655 +02:00 [DBG] Connection id "0HN73MRU8B8SS" received FIN.
2024-10-03 16:23:51.656 +02:00 [DBG] Connection id "0HN73MRU8B8ST" accepted.
2024-10-03 16:23:51.657 +02:00 [DBG] Connection id "0HN73MRU8B8SS" started.
2024-10-03 16:23:51.658 +02:00 [DBG] Connection id "0HN73MRU8B8ST" started.
2024-10-03 16:23:51.658 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:23:51.660 +02:00 [DBG] Connection id "0HN73MRU8B8SS" stopped.
2024-10-03 16:23:51.661 +02:00 [DBG] Connection id "0HN73MRU8B8SS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:23:51.661 +02:00 [DBG] Connection 0HN73MRU8B8ST established using the following protocol: "Tls13"
2024-10-03 16:23:51.664 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:23:51.666 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:23:51.669 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:23:51.671 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:23:51.672 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:23:51.673 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:23:51.674 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:23:51.687 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:23:51.689 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:23:51.690 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:23:51.691 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:23:51.692 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:23:51.693 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:23:51.695 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:23:51.696 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:23:51.699 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:23:51.701 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:23:51.702 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:23:51.703 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:23:51.704 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:23:51.705 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:23:51.706 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:23:51.707 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:23:51.708 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:23:51.709 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:23:51.765 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:23:52.048 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:23:52.050 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:23:52.184 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: None
2024-10-03 16:23:52.192 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 496.793ms
2024-10-03 16:23:52.193 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:23:52.194 +02:00 [ERR] Exception occurred: The given key 'ReadHabitById' was not present in the dictionary.
System.Collections.Generic.KeyNotFoundException: The given key 'ReadHabitById' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:23:52.216 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 549.8103 ms
2024-10-03 16:23:52.217 +02:00 [DBG] Connection id "0HN73MRU8B8ST" completed keep alive response.
2024-10-03 16:23:52.219 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:23:52.221 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 557.1467ms
2024-10-03 16:24:44.917 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:24:44.946 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:24:44.963 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:24:44.982 +02:00 [DBG] Hosting starting
2024-10-03 16:24:44.991 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:24:44.995 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:24:44.999 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:24:45.001 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:24:45.002 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:24:45.003 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:24:45.005 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:24:45.007 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:24:45.008 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:24:45.010 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:24:45.056 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:24:45.057 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:24:45.058 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:24:45.058 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:24:45.059 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:24:45.059 +02:00 [INF] Hosting environment: Production
2024-10-03 16:24:45.060 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:24:45.060 +02:00 [DBG] Hosting started
2024-10-03 16:24:45.121 +02:00 [DBG] Connection id "0HN73MSGF9VFV" accepted.
2024-10-03 16:24:45.122 +02:00 [DBG] Connection id "0HN73MSGF9VFV" started.
2024-10-03 16:24:45.132 +02:00 [DBG] Connection id "0HN73MSGF9VG0" accepted.
2024-10-03 16:24:45.133 +02:00 [DBG] Connection id "0HN73MSGF9VG0" started.
2024-10-03 16:24:45.181 +02:00 [DBG] Connection id "0HN73MSGF9VFV" received FIN.
2024-10-03 16:24:45.181 +02:00 [DBG] Connection id "0HN73MSGF9VG0" received FIN.
2024-10-03 16:24:45.186 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:24:45.186 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:24:45.192 +02:00 [DBG] Connection id "0HN73MSGF9VFV" stopped.
2024-10-03 16:24:45.192 +02:00 [DBG] Connection id "0HN73MSGF9VG0" stopped.
2024-10-03 16:24:45.193 +02:00 [DBG] Connection id "0HN73MSGF9VG0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:24:45.193 +02:00 [DBG] Connection id "0HN73MSGF9VFV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:24:49.906 +02:00 [DBG] Connection id "0HN73MSGF9VG1" accepted.
2024-10-03 16:24:49.907 +02:00 [DBG] Connection id "0HN73MSGF9VG1" received FIN.
2024-10-03 16:24:49.907 +02:00 [DBG] Connection id "0HN73MSGF9VG1" started.
2024-10-03 16:24:49.907 +02:00 [DBG] Connection id "0HN73MSGF9VG2" accepted.
2024-10-03 16:24:49.908 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:24:49.909 +02:00 [DBG] Connection id "0HN73MSGF9VG2" started.
2024-10-03 16:24:49.910 +02:00 [DBG] Connection id "0HN73MSGF9VG1" stopped.
2024-10-03 16:24:49.911 +02:00 [DBG] Connection id "0HN73MSGF9VG1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:24:49.923 +02:00 [DBG] Connection 0HN73MSGF9VG2 established using the following protocol: "Tls13"
2024-10-03 16:24:49.938 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:24:49.942 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:24:49.944 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:24:49.954 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:24:49.956 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:24:49.957 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:24:49.968 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:24:49.970 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:24:49.981 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:24:49.983 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:24:49.984 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:24:49.985 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:24:49.986 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:24:49.987 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:24:49.989 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:24:49.990 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:24:49.993 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:24:49.994 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:24:49.995 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:24:49.996 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:24:49.997 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:24:49.999 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:24:50.001 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:24:50.002 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:24:50.003 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:24:50.003 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:24:50.060 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:24:50.343 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:24:50.344 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:24:50.477 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: None
2024-10-03 16:24:50.528 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql(EXEC [dbo].[GetHabitById] @Id, __p_0)
    .AsNoTracking()'
2024-10-03 16:24:50.551 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:24:50.553 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:24:50.662 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-10-03 16:24:50.671 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: Comment.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Comment.Body (string) Required, 16], [Property: Comment.Date (DateOnly) Required, 17], [Property: Comment.HabitId (Guid) Required FK Index, 18] }
            3 -> 15
            4 -> Dictionary<IProperty, int> { [Property: DayResult.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: DayResult.Date (DateOnly) Required, 20], [Property: DayResult.HabitId (Guid) Required FK Index, 21], [Property: DayResult.Progress (int) Required, 22], [Property: DayResult.Status (Statuses) Required, 23] }
            5 -> 19
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId, c.Id, c.Body, c.Date, c.HabitId, d.Id, d.Date, d.HabitId, d.Progress, d.Status
        FROM EXEC [dbo].[GetHabitById] @Id
        LEFT JOIN Comments AS c ON g.Id == c.HabitId
        LEFT JOIN DayResults AS d ON g.Id == d.HabitId
        ORDER BY g.Id ASC, c.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Habit>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:24:50.688 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:24:50.699 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 709.2869ms
2024-10-03 16:24:50.701 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:24:50.702 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:24:50.730 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 786.5609 ms
2024-10-03 16:24:50.732 +02:00 [DBG] Connection id "0HN73MSGF9VG2" completed keep alive response.
2024-10-03 16:24:50.737 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:24:50.739 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 801.9982ms
2024-10-03 16:27:04.674 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:27:04.701 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:27:04.719 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:27:04.740 +02:00 [DBG] Hosting starting
2024-10-03 16:27:04.748 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:27:04.753 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:27:04.757 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:27:04.760 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:27:04.761 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:27:04.762 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:27:04.764 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:27:04.766 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:27:04.768 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:27:04.769 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:27:04.819 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:27:04.820 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:27:04.821 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:27:04.821 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:27:04.822 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:27:04.822 +02:00 [INF] Hosting environment: Production
2024-10-03 16:27:04.823 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:27:04.823 +02:00 [DBG] Hosting started
2024-10-03 16:27:04.994 +02:00 [DBG] Connection id "0HN73MTQ57OQC" accepted.
2024-10-03 16:27:04.994 +02:00 [DBG] Connection id "0HN73MTQ57OQD" accepted.
2024-10-03 16:27:04.995 +02:00 [DBG] Connection id "0HN73MTQ57OQC" started.
2024-10-03 16:27:04.996 +02:00 [DBG] Connection id "0HN73MTQ57OQD" started.
2024-10-03 16:27:05.005 +02:00 [DBG] Connection id "0HN73MTQ57OQC" received FIN.
2024-10-03 16:27:05.005 +02:00 [DBG] Connection id "0HN73MTQ57OQD" received FIN.
2024-10-03 16:27:05.008 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:27:05.008 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:27:05.013 +02:00 [DBG] Connection id "0HN73MTQ57OQC" stopped.
2024-10-03 16:27:05.013 +02:00 [DBG] Connection id "0HN73MTQ57OQD" stopped.
2024-10-03 16:27:05.014 +02:00 [DBG] Connection id "0HN73MTQ57OQC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:27:05.014 +02:00 [DBG] Connection id "0HN73MTQ57OQD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:27:15.297 +02:00 [DBG] Connection id "0HN73MTQ57OQE" accepted.
2024-10-03 16:27:15.298 +02:00 [DBG] Connection id "0HN73MTQ57OQE" received FIN.
2024-10-03 16:27:15.298 +02:00 [DBG] Connection id "0HN73MTQ57OQE" started.
2024-10-03 16:27:15.299 +02:00 [DBG] Connection id "0HN73MTQ57OQF" accepted.
2024-10-03 16:27:15.300 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:27:15.300 +02:00 [DBG] Connection id "0HN73MTQ57OQF" started.
2024-10-03 16:27:15.303 +02:00 [DBG] Connection id "0HN73MTQ57OQE" stopped.
2024-10-03 16:27:15.304 +02:00 [DBG] Connection id "0HN73MTQ57OQE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:27:15.320 +02:00 [DBG] Connection 0HN73MTQ57OQF established using the following protocol: "Tls13"
2024-10-03 16:27:15.337 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:27:15.343 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:27:15.345 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:27:15.359 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:27:15.361 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:27:15.362 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:27:15.375 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:27:15.376 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:27:15.389 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:27:15.391 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:27:15.392 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:27:15.394 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:27:15.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:27:15.396 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:27:15.399 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:27:15.400 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:27:15.404 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:27:15.406 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:27:15.408 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:27:15.409 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:27:15.410 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:27:15.412 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:27:15.413 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:27:15.414 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:27:15.415 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:27:15.416 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:27:15.475 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:27:15.761 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:27:15.762 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:27:15.900 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:27:15.931 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql(EXEC [dbo].[GetHabitById] @Id, __p_0)
    .AsNoTracking()'
2024-10-03 16:27:15.948 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:27:15.949 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:27:16.058 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM EXEC [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:27:16.074 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:27:16.084 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 684.7303ms
2024-10-03 16:27:16.087 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:27:16.088 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:27:16.113 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 767.5167 ms
2024-10-03 16:27:16.114 +02:00 [DBG] Connection id "0HN73MTQ57OQF" completed keep alive response.
2024-10-03 16:27:16.117 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:27:16.120 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 783.9834ms
2024-10-03 16:29:27.784 +02:00 [DBG] Connection id "0HN73MTQ57OQF" disconnecting.
2024-10-03 16:29:27.785 +02:00 [DBG] Connection id "0HN73MTQ57OQF" stopped.
2024-10-03 16:29:27.785 +02:00 [DBG] Connection id "0HN73MTQ57OQF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:32:38.409 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:32:38.434 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:32:38.451 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:32:38.471 +02:00 [DBG] Hosting starting
2024-10-03 16:32:38.480 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:32:38.484 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:32:38.489 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:32:38.491 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:32:38.491 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:32:38.493 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:32:38.494 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:32:38.496 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:32:38.498 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:32:38.499 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:32:38.546 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:32:38.546 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:32:38.547 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:32:38.547 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:32:38.548 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:32:38.548 +02:00 [INF] Hosting environment: Production
2024-10-03 16:32:38.549 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:32:38.549 +02:00 [DBG] Hosting started
2024-10-03 16:32:38.662 +02:00 [DBG] Connection id "0HN73N0TJB3NU" accepted.
2024-10-03 16:32:38.664 +02:00 [DBG] Connection id "0HN73N0TJB3NU" started.
2024-10-03 16:32:38.672 +02:00 [DBG] Connection id "0HN73N0TJB3NV" accepted.
2024-10-03 16:32:38.673 +02:00 [DBG] Connection id "0HN73N0TJB3NV" started.
2024-10-03 16:32:38.704 +02:00 [DBG] Connection id "0HN73N0TJB3NV" received FIN.
2024-10-03 16:32:38.704 +02:00 [DBG] Connection id "0HN73N0TJB3NU" received FIN.
2024-10-03 16:32:38.707 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:32:38.707 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:32:38.713 +02:00 [DBG] Connection id "0HN73N0TJB3NU" stopped.
2024-10-03 16:32:38.713 +02:00 [DBG] Connection id "0HN73N0TJB3NV" stopped.
2024-10-03 16:32:38.714 +02:00 [DBG] Connection id "0HN73N0TJB3NV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:32:38.714 +02:00 [DBG] Connection id "0HN73N0TJB3NU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:32:51.095 +02:00 [DBG] Connection id "0HN73N0TJB3O0" accepted.
2024-10-03 16:32:51.095 +02:00 [DBG] Connection id "0HN73N0TJB3O0" received FIN.
2024-10-03 16:32:51.095 +02:00 [DBG] Connection id "0HN73N0TJB3O0" started.
2024-10-03 16:32:51.096 +02:00 [DBG] Connection id "0HN73N0TJB3O1" accepted.
2024-10-03 16:32:51.097 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:32:51.097 +02:00 [DBG] Connection id "0HN73N0TJB3O1" started.
2024-10-03 16:32:51.099 +02:00 [DBG] Connection id "0HN73N0TJB3O0" stopped.
2024-10-03 16:32:51.099 +02:00 [DBG] Connection id "0HN73N0TJB3O0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:32:51.112 +02:00 [DBG] Connection 0HN73N0TJB3O1 established using the following protocol: "Tls13"
2024-10-03 16:32:51.126 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:32:51.131 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:32:51.133 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:32:51.143 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:32:51.145 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:32:51.146 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:32:51.157 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:32:51.159 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:32:51.171 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:32:51.173 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:32:51.174 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:32:51.175 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:32:51.176 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:32:51.177 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:32:51.179 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:32:51.180 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:32:51.182 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:32:51.184 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:32:51.185 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:32:51.186 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:32:51.186 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:32:51.188 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:32:51.189 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:32:51.190 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:32:51.191 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:32:51.192 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:32:51.254 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:32:51.531 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:32:51.532 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:32:51.665 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:32:51.692 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql(EXEC [dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:32:51.709 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:32:51.710 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:32:51.825 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM EXEC [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    Action<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator>, 
    null, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:32:51.837 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-10-03 16:32:51.847 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 668.2321ms
2024-10-03 16:32:51.850 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:32:51.851 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:32:51.875 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 742.9454 ms
2024-10-03 16:32:51.877 +02:00 [DBG] Connection id "0HN73N0TJB3O1" completed keep alive response.
2024-10-03 16:32:51.880 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:32:51.882 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 756.3329ms
2024-10-03 16:35:03.379 +02:00 [DBG] Connection id "0HN73N0TJB3O1" disconnecting.
2024-10-03 16:35:03.382 +02:00 [DBG] Connection id "0HN73N0TJB3O1" stopped.
2024-10-03 16:35:03.383 +02:00 [DBG] Connection id "0HN73N0TJB3O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:35:06.795 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:35:06.822 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:35:06.839 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:35:06.859 +02:00 [DBG] Hosting starting
2024-10-03 16:35:06.868 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:35:06.872 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:35:06.877 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:35:06.879 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:35:06.880 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:35:06.881 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:35:06.884 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:35:06.886 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:35:06.888 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:35:06.888 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:35:06.936 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:35:06.937 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:35:06.937 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:35:06.938 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:35:06.938 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:35:06.939 +02:00 [INF] Hosting environment: Production
2024-10-03 16:35:06.939 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:35:06.940 +02:00 [DBG] Hosting started
2024-10-03 16:35:07.000 +02:00 [DBG] Connection id "0HN73N29Q0EN5" accepted.
2024-10-03 16:35:07.003 +02:00 [DBG] Connection id "0HN73N29Q0EN5" started.
2024-10-03 16:35:07.005 +02:00 [DBG] Connection id "0HN73N29Q0EN6" accepted.
2024-10-03 16:35:07.006 +02:00 [DBG] Connection id "0HN73N29Q0EN6" started.
2024-10-03 16:35:07.040 +02:00 [DBG] Connection id "0HN73N29Q0EN6" received FIN.
2024-10-03 16:35:07.040 +02:00 [DBG] Connection id "0HN73N29Q0EN5" received FIN.
2024-10-03 16:35:07.046 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:35:07.046 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:35:07.055 +02:00 [DBG] Connection id "0HN73N29Q0EN5" stopped.
2024-10-03 16:35:07.055 +02:00 [DBG] Connection id "0HN73N29Q0EN6" stopped.
2024-10-03 16:35:07.057 +02:00 [DBG] Connection id "0HN73N29Q0EN5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:35:07.057 +02:00 [DBG] Connection id "0HN73N29Q0EN6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:35:11.222 +02:00 [DBG] Connection id "0HN73N29Q0EN7" accepted.
2024-10-03 16:35:11.222 +02:00 [DBG] Connection id "0HN73N29Q0EN7" received FIN.
2024-10-03 16:35:11.223 +02:00 [DBG] Connection id "0HN73N29Q0EN7" started.
2024-10-03 16:35:11.224 +02:00 [DBG] Connection id "0HN73N29Q0EN8" accepted.
2024-10-03 16:35:11.226 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:35:11.226 +02:00 [DBG] Connection id "0HN73N29Q0EN8" started.
2024-10-03 16:35:11.228 +02:00 [DBG] Connection id "0HN73N29Q0EN7" stopped.
2024-10-03 16:35:11.229 +02:00 [DBG] Connection id "0HN73N29Q0EN7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:35:11.241 +02:00 [DBG] Connection 0HN73N29Q0EN8 established using the following protocol: "Tls13"
2024-10-03 16:35:11.255 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:35:11.260 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:35:11.262 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:35:11.273 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:35:11.274 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:35:11.276 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:35:11.286 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:35:11.288 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:35:11.299 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:35:11.301 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:35:11.302 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:35:11.303 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:35:11.304 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:35:11.305 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:35:11.307 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:35:11.308 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:35:11.311 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:35:11.313 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:35:11.314 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:35:11.314 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:35:11.315 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:35:11.316 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:35:11.318 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:35:11.318 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:35:11.319 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:35:11.320 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:35:11.377 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:35:11.646 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:35:11.647 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:35:11.777 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:35:11.802 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql(EXEC [dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:35:11.819 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:35:11.819 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:35:11.924 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM EXEC [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:35:11.938 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:35:11.952 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 644.0944ms
2024-10-03 16:35:11.954 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:35:11.955 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:35:11.980 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 718.1802 ms
2024-10-03 16:35:11.981 +02:00 [DBG] Connection id "0HN73N29Q0EN8" completed keep alive response.
2024-10-03 16:35:11.984 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:35:11.987 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 732.2922ms
2024-10-03 16:37:23.784 +02:00 [DBG] Connection id "0HN73N29Q0EN8" disconnecting.
2024-10-03 16:37:23.785 +02:00 [DBG] Connection id "0HN73N29Q0EN8" stopped.
2024-10-03 16:37:23.786 +02:00 [DBG] Connection id "0HN73N29Q0EN8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:50:30.784 +02:00 [DBG] Config reload token fired. Checking for changes...
2024-10-03 16:50:31.057 +02:00 [DBG] Config reload token fired. Checking for changes...
2024-10-03 16:50:37.286 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:50:37.314 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:50:37.332 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:50:37.356 +02:00 [DBG] Hosting starting
2024-10-03 16:50:37.366 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:50:37.370 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:50:37.376 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:50:37.379 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:50:37.379 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:50:37.381 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:50:37.383 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:50:37.385 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:50:37.387 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:50:37.388 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:50:37.439 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:50:37.440 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:50:37.440 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:50:37.441 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:50:37.442 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:50:37.442 +02:00 [INF] Hosting environment: Production
2024-10-03 16:50:37.442 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:50:37.443 +02:00 [DBG] Hosting started
2024-10-03 16:50:37.484 +02:00 [DBG] Connection id "0HN73NAV3PL35" received FIN.
2024-10-03 16:50:37.492 +02:00 [DBG] Connection id "0HN73NAV3PL35" accepted.
2024-10-03 16:50:37.499 +02:00 [DBG] Connection id "0HN73NAV3PL35" started.
2024-10-03 16:50:37.504 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:50:37.511 +02:00 [DBG] Connection id "0HN73NAV3PL35" stopped.
2024-10-03 16:50:37.513 +02:00 [DBG] Connection id "0HN73NAV3PL35" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:50:37.573 +02:00 [DBG] Connection id "0HN73NAV3PL36" accepted.
2024-10-03 16:50:37.574 +02:00 [DBG] Connection id "0HN73NAV3PL36" started.
2024-10-03 16:50:37.596 +02:00 [DBG] Connection 0HN73NAV3PL36 established using the following protocol: "Tls13"
2024-10-03 16:50:37.614 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7154/swagger/index.html - null null
2024-10-03 16:50:37.628 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:50:37.630 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:50:37.638 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-10-03 16:50:37.639 +02:00 [DBG] Request did not match any endpoints
2024-10-03 16:50:37.650 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:50:37.652 +02:00 [INF] HTTP GET /swagger/index.html responded 404 in 22.3441 ms
2024-10-03 16:50:37.659 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7154/swagger/index.html - 404 0 null 44.8943ms
2024-10-03 16:50:37.662 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7154/swagger/index.html, Response status code: 404
2024-10-03 16:50:41.205 +02:00 [DBG] Connection id "0HN73NAV3PL37" accepted.
2024-10-03 16:50:41.206 +02:00 [DBG] Connection id "0HN73NAV3PL37" received FIN.
2024-10-03 16:50:41.207 +02:00 [DBG] Connection id "0HN73NAV3PL37" started.
2024-10-03 16:50:41.208 +02:00 [DBG] Connection id "0HN73NAV3PL38" accepted.
2024-10-03 16:50:41.210 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:50:41.210 +02:00 [DBG] Connection id "0HN73NAV3PL38" started.
2024-10-03 16:50:41.212 +02:00 [DBG] Connection id "0HN73NAV3PL37" stopped.
2024-10-03 16:50:41.213 +02:00 [DBG] Connection id "0HN73NAV3PL37" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:50:41.214 +02:00 [DBG] Connection 0HN73NAV3PL38 established using the following protocol: "Tls13"
2024-10-03 16:50:41.217 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:50:41.219 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:50:41.222 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:50:41.224 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:50:41.226 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:50:41.227 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:50:41.228 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:50:41.245 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:50:41.248 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:50:41.249 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:50:41.250 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:50:41.252 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:50:41.253 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:50:41.256 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:50:41.258 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:50:41.261 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:50:41.263 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:50:41.265 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:50:41.266 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:50:41.267 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:50:41.269 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:50:41.270 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:50:41.272 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:50:41.273 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:50:41.274 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:50:41.332 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:50:41.599 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:50:41.601 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:50:41.734 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:50:41.762 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:50:41.779 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:50:41.781 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:50:41.891 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:50:41.907 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:50:41.919 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 662.7658ms
2024-10-03 16:50:41.920 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:50:41.921 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:50:41.948 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 728.3169 ms
2024-10-03 16:50:41.949 +02:00 [DBG] Connection id "0HN73NAV3PL38" completed keep alive response.
2024-10-03 16:50:41.951 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:50:41.953 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 735.7563ms
2024-10-03 16:51:58.713 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:51:58.745 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:51:58.765 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:51:58.788 +02:00 [DBG] Hosting starting
2024-10-03 16:51:58.798 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:51:58.802 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:51:58.807 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:51:58.810 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:51:58.811 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:51:58.812 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:51:58.814 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:51:58.817 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:51:58.819 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:51:58.820 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:51:58.876 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:51:58.877 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:51:58.878 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:51:58.879 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:51:58.880 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:51:58.880 +02:00 [INF] Hosting environment: Production
2024-10-03 16:51:58.881 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:51:58.882 +02:00 [DBG] Hosting started
2024-10-03 16:51:58.893 +02:00 [DBG] Connection id "0HN73NBNC5F4N" accepted.
2024-10-03 16:51:58.894 +02:00 [DBG] Connection id "0HN73NBNC5F4N" started.
2024-10-03 16:51:58.935 +02:00 [DBG] Connection id "0HN73NBNC5F4N" received FIN.
2024-10-03 16:51:58.938 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:51:58.946 +02:00 [DBG] Connection id "0HN73NBNC5F4N" stopped.
2024-10-03 16:51:58.953 +02:00 [DBG] Connection id "0HN73NBNC5F4N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:03.272 +02:00 [DBG] Connection id "0HN73NBNC5F4O" accepted.
2024-10-03 16:52:03.273 +02:00 [DBG] Connection id "0HN73NBNC5F4O" received FIN.
2024-10-03 16:52:03.273 +02:00 [DBG] Connection id "0HN73NBNC5F4O" started.
2024-10-03 16:52:03.274 +02:00 [DBG] Connection id "0HN73NBNC5F4P" accepted.
2024-10-03 16:52:03.275 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:03.276 +02:00 [DBG] Connection id "0HN73NBNC5F4P" started.
2024-10-03 16:52:03.277 +02:00 [DBG] Connection id "0HN73NBNC5F4O" stopped.
2024-10-03 16:52:03.278 +02:00 [DBG] Connection id "0HN73NBNC5F4O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:03.291 +02:00 [DBG] Connection 0HN73NBNC5F4P established using the following protocol: "Tls13"
2024-10-03 16:52:03.305 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:52:03.311 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:52:03.313 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:52:03.322 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:03.324 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:03.326 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:03.336 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:52:03.338 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:03.350 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:52:03.351 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:52:03.352 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:52:03.353 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:52:03.354 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:52:03.355 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:52:03.357 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:03.358 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:03.362 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:03.363 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:52:03.365 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:03.365 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:03.366 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:03.367 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:03.369 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:03.369 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:03.370 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:03.371 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:03.428 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:52:03.710 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:52:03.711 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:52:03.851 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:52:03.879 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:52:03.896 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:52:03.897 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:52:04.003 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:52:04.015 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:52:04.025 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 667.8098ms
2024-10-03 16:52:04.028 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:04.029 +02:00 [ERR] Exception occurred: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:52:04.054 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 741.2955 ms
2024-10-03 16:52:04.055 +02:00 [DBG] Connection id "0HN73NBNC5F4P" completed keep alive response.
2024-10-03 16:52:04.058 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:52:04.062 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 756.9635ms
2024-10-03 16:52:23.320 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:52:23.347 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:52:23.364 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:52:23.384 +02:00 [DBG] Hosting starting
2024-10-03 16:52:23.393 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:52:23.397 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:52:23.401 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:52:23.403 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:52:23.404 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:52:23.405 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:52:23.407 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:52:23.409 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:52:23.410 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:52:23.411 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:52:23.460 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:52:23.461 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:52:23.461 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:52:23.462 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:52:23.462 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:52:23.463 +02:00 [INF] Hosting environment: Production
2024-10-03 16:52:23.463 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:52:23.464 +02:00 [DBG] Hosting started
2024-10-03 16:52:23.524 +02:00 [DBG] Connection id "0HN73NBUN290Q" accepted.
2024-10-03 16:52:23.524 +02:00 [DBG] Connection id "0HN73NBUN290R" accepted.
2024-10-03 16:52:23.525 +02:00 [DBG] Connection id "0HN73NBUN290Q" started.
2024-10-03 16:52:23.525 +02:00 [DBG] Connection id "0HN73NBUN290R" started.
2024-10-03 16:52:23.551 +02:00 [DBG] Connection id "0HN73NBUN290R" received FIN.
2024-10-03 16:52:23.551 +02:00 [DBG] Connection id "0HN73NBUN290Q" received FIN.
2024-10-03 16:52:23.554 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:23.554 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:23.560 +02:00 [DBG] Connection id "0HN73NBUN290Q" stopped.
2024-10-03 16:52:23.560 +02:00 [DBG] Connection id "0HN73NBUN290R" stopped.
2024-10-03 16:52:23.562 +02:00 [DBG] Connection id "0HN73NBUN290R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:23.562 +02:00 [DBG] Connection id "0HN73NBUN290Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:24.944 +02:00 [DBG] Connection id "0HN73NBUN290S" accepted.
2024-10-03 16:52:24.944 +02:00 [DBG] Connection id "0HN73NBUN290S" received FIN.
2024-10-03 16:52:24.945 +02:00 [DBG] Connection id "0HN73NBUN290S" started.
2024-10-03 16:52:24.945 +02:00 [DBG] Connection id "0HN73NBUN290T" accepted.
2024-10-03 16:52:24.946 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:24.946 +02:00 [DBG] Connection id "0HN73NBUN290T" started.
2024-10-03 16:52:24.947 +02:00 [DBG] Connection id "0HN73NBUN290S" stopped.
2024-10-03 16:52:24.948 +02:00 [DBG] Connection id "0HN73NBUN290S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:24.966 +02:00 [DBG] Connection 0HN73NBUN290T established using the following protocol: "Tls13"
2024-10-03 16:52:24.985 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:52:24.992 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:52:24.995 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:52:25.008 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:25.011 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:25.013 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:25.026 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:52:25.028 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:25.042 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:52:25.044 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:52:25.046 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:52:25.047 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:52:25.048 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:52:25.049 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:52:25.052 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:25.053 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:25.056 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:25.058 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:52:25.059 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:25.060 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:25.061 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:25.063 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:25.064 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:25.065 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:25.066 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:25.067 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:25.121 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:52:25.400 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:52:25.401 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:52:25.532 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:52:25.559 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:52:25.575 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:52:25.576 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:52:25.681 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    null, 
    Func<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator, Task>, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:52:25.691 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-10-03 16:52:25.703 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 650.4451ms
2024-10-03 16:52:25.705 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:25.706 +02:00 [ERR] Exception occurred: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:52:25.731 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 736.7435 ms
2024-10-03 16:52:25.733 +02:00 [DBG] Connection id "0HN73NBUN290T" completed keep alive response.
2024-10-03 16:52:25.735 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:52:25.738 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 753.5223ms
2024-10-03 16:52:52.367 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:52:52.394 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:52:52.412 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:52:52.431 +02:00 [DBG] Hosting starting
2024-10-03 16:52:52.440 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:52:52.444 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:52:52.448 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:52:52.451 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:52:52.451 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:52:52.452 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:52:52.455 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:52:52.457 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:52:52.459 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:52:52.460 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:52:52.506 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:52:52.507 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:52:52.507 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:52:52.508 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:52:52.508 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:52:52.509 +02:00 [INF] Hosting environment: Production
2024-10-03 16:52:52.509 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:52:52.510 +02:00 [DBG] Hosting started
2024-10-03 16:52:52.723 +02:00 [DBG] Connection id "0HN73NC7DH5HO" accepted.
2024-10-03 16:52:52.723 +02:00 [DBG] Connection id "0HN73NC7DH5HP" accepted.
2024-10-03 16:52:52.725 +02:00 [DBG] Connection id "0HN73NC7DH5HO" started.
2024-10-03 16:52:52.726 +02:00 [DBG] Connection id "0HN73NC7DH5HP" started.
2024-10-03 16:52:52.727 +02:00 [DBG] Connection id "0HN73NC7DH5HO" received FIN.
2024-10-03 16:52:52.727 +02:00 [DBG] Connection id "0HN73NC7DH5HP" received FIN.
2024-10-03 16:52:52.731 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:52.731 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:52.736 +02:00 [DBG] Connection id "0HN73NC7DH5HO" stopped.
2024-10-03 16:52:52.736 +02:00 [DBG] Connection id "0HN73NC7DH5HP" stopped.
2024-10-03 16:52:52.738 +02:00 [DBG] Connection id "0HN73NC7DH5HO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:52.738 +02:00 [DBG] Connection id "0HN73NC7DH5HP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:54.123 +02:00 [DBG] Connection id "0HN73NC7DH5HQ" accepted.
2024-10-03 16:52:54.123 +02:00 [DBG] Connection id "0HN73NC7DH5HQ" received FIN.
2024-10-03 16:52:54.125 +02:00 [DBG] Connection id "0HN73NC7DH5HQ" started.
2024-10-03 16:52:54.126 +02:00 [DBG] Connection id "0HN73NC7DH5HR" accepted.
2024-10-03 16:52:54.127 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:52:54.128 +02:00 [DBG] Connection id "0HN73NC7DH5HR" started.
2024-10-03 16:52:54.129 +02:00 [DBG] Connection id "0HN73NC7DH5HQ" stopped.
2024-10-03 16:52:54.130 +02:00 [DBG] Connection id "0HN73NC7DH5HQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:52:54.148 +02:00 [DBG] Connection 0HN73NC7DH5HR established using the following protocol: "Tls13"
2024-10-03 16:52:54.162 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:52:54.167 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:52:54.169 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:52:54.179 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:54.182 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:52:54.183 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:54.195 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:52:54.196 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:54.209 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:52:54.210 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:52:54.211 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:52:54.212 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:52:54.214 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:52:54.215 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:52:54.216 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:54.217 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:52:54.220 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:54.221 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:52:54.222 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:54.223 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:54.224 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:52:54.225 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:52:54.227 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:54.228 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:54.229 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:52:54.230 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:52:54.287 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:52:54.553 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:52:54.554 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:52:54.678 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:52:54.702 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:52:54.719 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:52:54.720 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:52:54.822 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    Action<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator>, 
    null, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:52:54.832 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-10-03 16:52:54.843 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 626.4126ms
2024-10-03 16:52:54.846 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:52:54.847 +02:00 [ERR] Exception occurred: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:52:54.875 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 706.1327 ms
2024-10-03 16:52:54.877 +02:00 [DBG] Connection id "0HN73NC7DH5HR" completed keep alive response.
2024-10-03 16:52:54.880 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:52:54.882 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 720.2429ms
2024-10-03 16:54:01.759 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:54:01.787 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:54:01.806 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:54:01.830 +02:00 [DBG] Hosting starting
2024-10-03 16:54:01.841 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:54:01.847 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:54:01.852 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:54:01.854 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:54:01.855 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:54:01.857 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:54:01.859 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:54:01.862 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:54:01.864 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:54:01.865 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:54:01.913 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:54:01.914 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:54:01.915 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:54:01.915 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:54:01.916 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:54:01.916 +02:00 [INF] Hosting environment: Production
2024-10-03 16:54:01.917 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:54:01.917 +02:00 [DBG] Hosting started
2024-10-03 16:54:01.940 +02:00 [DBG] Connection id "0HN73NCS1KFFV" accepted.
2024-10-03 16:54:01.940 +02:00 [DBG] Connection id "0HN73NCS1KFFU" accepted.
2024-10-03 16:54:01.941 +02:00 [DBG] Connection id "0HN73NCS1KFFV" started.
2024-10-03 16:54:01.941 +02:00 [DBG] Connection id "0HN73NCS1KFFU" started.
2024-10-03 16:54:01.967 +02:00 [DBG] Connection id "0HN73NCS1KFFV" received FIN.
2024-10-03 16:54:01.967 +02:00 [DBG] Connection id "0HN73NCS1KFFU" received FIN.
2024-10-03 16:54:01.970 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:54:01.970 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:54:01.976 +02:00 [DBG] Connection id "0HN73NCS1KFFV" stopped.
2024-10-03 16:54:01.976 +02:00 [DBG] Connection id "0HN73NCS1KFFU" stopped.
2024-10-03 16:54:01.978 +02:00 [DBG] Connection id "0HN73NCS1KFFU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:54:01.978 +02:00 [DBG] Connection id "0HN73NCS1KFFV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:54:11.765 +02:00 [DBG] Connection id "0HN73NCS1KFG0" accepted.
2024-10-03 16:54:11.766 +02:00 [DBG] Connection id "0HN73NCS1KFG0" received FIN.
2024-10-03 16:54:11.766 +02:00 [DBG] Connection id "0HN73NCS1KFG0" started.
2024-10-03 16:54:11.766 +02:00 [DBG] Connection id "0HN73NCS1KFG1" accepted.
2024-10-03 16:54:11.767 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:54:11.768 +02:00 [DBG] Connection id "0HN73NCS1KFG1" started.
2024-10-03 16:54:11.769 +02:00 [DBG] Connection id "0HN73NCS1KFG0" stopped.
2024-10-03 16:54:11.770 +02:00 [DBG] Connection id "0HN73NCS1KFG0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:54:11.785 +02:00 [DBG] Connection 0HN73NCS1KFG1 established using the following protocol: "Tls13"
2024-10-03 16:54:11.803 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:54:11.810 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:54:11.813 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:54:11.826 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:54:11.829 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:54:11.830 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:54:11.844 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:54:11.846 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:54:11.857 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:54:11.859 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:54:11.860 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:54:11.862 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:54:11.863 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:54:11.864 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:54:11.866 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:54:11.867 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:54:11.871 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:54:11.872 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:54:11.873 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:54:11.874 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:54:11.875 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:54:11.876 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:54:11.878 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:54:11.879 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:54:11.880 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:54:11.881 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:54:11.939 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:54:12.223 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:54:12.224 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:54:12.353 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:54:12.378 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:54:12.394 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:54:12.395 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:54:12.499 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    Action<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator>, 
    null, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:54:12.508 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-10-03 16:54:12.518 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 651.2657ms
2024-10-03 16:54:12.520 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:54:12.521 +02:00 [ERR] Exception occurred: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMappingForValue(IRelationalTypeMappingSource typeMappingSource, Object value)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.<VisitChildren>g__VisitList|128_0[T](List`1 list, Boolean inPlace, Boolean& changed, <>c__DisplayClass128_0&)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor, Boolean updateColumns)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressions.SelectExpression.VisitChildren(ExpressionVisitor visitor)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlParameterExpandingExpressionVisitor.Expand(Expression queryExpression, IReadOnlyDictionary`2 parameterValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.ExpandFromSqlParameter(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.RelationalParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerParameterBasedSqlProcessor.Optimize(Expression queryExpression, IReadOnlyDictionary`2 parametersValues, Boolean& canCache)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:54:12.546 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 733.7147 ms
2024-10-03 16:54:12.547 +02:00 [DBG] Connection id "0HN73NCS1KFG1" completed keep alive response.
2024-10-03 16:54:12.550 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:54:12.552 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 750.2166ms
2024-10-03 16:55:31.705 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:55:31.734 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:55:31.752 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:55:31.772 +02:00 [DBG] Hosting starting
2024-10-03 16:55:31.781 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:55:31.785 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:55:31.790 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:55:31.792 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:55:31.792 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:55:31.794 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:55:31.796 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:55:31.798 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:55:31.799 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:55:31.800 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:55:31.849 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:55:31.850 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:55:31.850 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:55:31.851 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:55:31.851 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:55:31.852 +02:00 [INF] Hosting environment: Production
2024-10-03 16:55:31.852 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:55:31.853 +02:00 [DBG] Hosting started
2024-10-03 16:55:31.919 +02:00 [DBG] Connection id "0HN73NDMRNUK8" accepted.
2024-10-03 16:55:31.921 +02:00 [DBG] Connection id "0HN73NDMRNUK8" started.
2024-10-03 16:55:31.926 +02:00 [DBG] Connection id "0HN73NDMRNUK9" accepted.
2024-10-03 16:55:31.927 +02:00 [DBG] Connection id "0HN73NDMRNUK9" started.
2024-10-03 16:55:31.942 +02:00 [DBG] Connection id "0HN73NDMRNUK8" received FIN.
2024-10-03 16:55:31.942 +02:00 [DBG] Connection id "0HN73NDMRNUK9" received FIN.
2024-10-03 16:55:31.946 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:55:31.946 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:55:31.952 +02:00 [DBG] Connection id "0HN73NDMRNUK9" stopped.
2024-10-03 16:55:31.952 +02:00 [DBG] Connection id "0HN73NDMRNUK8" stopped.
2024-10-03 16:55:31.953 +02:00 [DBG] Connection id "0HN73NDMRNUK9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:55:31.953 +02:00 [DBG] Connection id "0HN73NDMRNUK8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:55:32.028 +02:00 [DBG] Connection id "0HN73NDMRNUKA" accepted.
2024-10-03 16:55:32.029 +02:00 [DBG] Connection id "0HN73NDMRNUKA" started.
2024-10-03 16:55:32.054 +02:00 [DBG] Connection 0HN73NDMRNUKA established using the following protocol: "Tls13"
2024-10-03 16:55:32.071 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7154/swagger/index.html - null null
2024-10-03 16:55:32.085 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:55:32.087 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:55:32.094 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-10-03 16:55:32.096 +02:00 [DBG] Request did not match any endpoints
2024-10-03 16:55:32.105 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:55:32.107 +02:00 [INF] HTTP GET /swagger/index.html responded 404 in 20.9990 ms
2024-10-03 16:55:32.111 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7154/swagger/index.html - 404 0 null 40.3931ms
2024-10-03 16:55:32.115 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7154/swagger/index.html, Response status code: 404
2024-10-03 16:56:19.911 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:56:19.940 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:56:19.958 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:56:19.978 +02:00 [DBG] Hosting starting
2024-10-03 16:56:19.988 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:56:19.992 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:56:19.996 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:56:19.998 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:56:19.999 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:56:20.000 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:56:20.002 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:56:20.004 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:56:20.006 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:56:20.007 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:56:20.056 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:56:20.057 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:56:20.058 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:56:20.058 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:56:20.059 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:56:20.059 +02:00 [INF] Hosting environment: Production
2024-10-03 16:56:20.060 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:56:20.060 +02:00 [DBG] Hosting started
2024-10-03 16:56:20.128 +02:00 [DBG] Connection id "0HN73NE57G5OQ" accepted.
2024-10-03 16:56:20.129 +02:00 [DBG] Connection id "0HN73NE57G5OQ" started.
2024-10-03 16:56:20.136 +02:00 [DBG] Connection id "0HN73NE57G5OR" accepted.
2024-10-03 16:56:20.137 +02:00 [DBG] Connection id "0HN73NE57G5OR" started.
2024-10-03 16:56:20.169 +02:00 [DBG] Connection id "0HN73NE57G5OQ" received FIN.
2024-10-03 16:56:20.169 +02:00 [DBG] Connection id "0HN73NE57G5OR" received FIN.
2024-10-03 16:56:20.175 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:56:20.175 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:56:20.189 +02:00 [DBG] Connection id "0HN73NE57G5OQ" stopped.
2024-10-03 16:56:20.189 +02:00 [DBG] Connection id "0HN73NE57G5OR" stopped.
2024-10-03 16:56:20.191 +02:00 [DBG] Connection id "0HN73NE57G5OQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:56:20.191 +02:00 [DBG] Connection id "0HN73NE57G5OR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:56:20.259 +02:00 [DBG] Connection id "0HN73NE57G5OS" accepted.
2024-10-03 16:56:20.260 +02:00 [DBG] Connection id "0HN73NE57G5OS" started.
2024-10-03 16:56:20.278 +02:00 [DBG] Connection 0HN73NE57G5OS established using the following protocol: "Tls13"
2024-10-03 16:56:20.298 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7154/swagger/index.html - null null
2024-10-03 16:56:20.311 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:56:20.313 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:56:20.321 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-10-03 16:56:20.322 +02:00 [DBG] Request did not match any endpoints
2024-10-03 16:56:20.332 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:56:20.335 +02:00 [INF] HTTP GET /swagger/index.html responded 404 in 22.2934 ms
2024-10-03 16:56:20.339 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7154/swagger/index.html - 404 0 null 41.643ms
2024-10-03 16:56:20.342 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7154/swagger/index.html, Response status code: 404
2024-10-03 16:56:25.621 +02:00 [DBG] Connection id "0HN73NE57G5OT" accepted.
2024-10-03 16:56:25.622 +02:00 [DBG] Connection id "0HN73NE57G5OT" started.
2024-10-03 16:56:25.622 +02:00 [DBG] Connection id "0HN73NE57G5OT" received FIN.
2024-10-03 16:56:25.622 +02:00 [DBG] Connection id "0HN73NE57G5OU" accepted.
2024-10-03 16:56:25.623 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:56:25.623 +02:00 [DBG] Connection id "0HN73NE57G5OU" started.
2024-10-03 16:56:25.625 +02:00 [DBG] Connection id "0HN73NE57G5OT" stopped.
2024-10-03 16:56:25.626 +02:00 [DBG] Connection id "0HN73NE57G5OT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:56:25.627 +02:00 [DBG] Connection 0HN73NE57G5OU established using the following protocol: "Tls13"
2024-10-03 16:56:25.630 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:56:25.632 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:56:25.634 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:56:25.636 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:56:25.638 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:56:25.639 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:56:25.640 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:56:25.653 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:56:25.655 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:56:25.656 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:56:25.657 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:56:25.658 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:56:25.659 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:56:25.661 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:56:25.662 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:56:25.665 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:56:25.667 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:56:25.668 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:56:25.669 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:56:25.670 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:56:25.671 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:56:25.673 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:56:25.674 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:56:25.675 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:56:25.676 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:56:25.734 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:56:26.009 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:56:26.011 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:56:26.141 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:56:26.169 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:56:26.187 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:56:26.188 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:56:26.290 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    Action<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator>, 
    null, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:56:26.303 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-10-03 16:56:26.314 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 651.847ms
2024-10-03 16:56:26.315 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:56:26.315 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:56:26.337 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 705.7011 ms
2024-10-03 16:56:26.338 +02:00 [DBG] Connection id "0HN73NE57G5OU" completed keep alive response.
2024-10-03 16:56:26.340 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:56:26.342 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 712.3561ms
2024-10-03 16:57:56.807 +02:00 [DBG] Initializing Razor view compiler with no compiled views.
2024-10-03 16:57:56.837 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-10-03 16:57:56.856 +02:00 [INF] User profile is available. Using 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-03 16:57:56.876 +02:00 [DBG] Hosting starting
2024-10-03 16:57:56.887 +02:00 [DBG] Reading data from file 'C:\Users\dobre\AppData\Local\ASP.NET\DataProtection-Keys\key-d3fee60e-e7e4-485b-8db6-37af50a0aecc.xml'.
2024-10-03 16:57:56.891 +02:00 [DBG] Found key {d3fee60e-e7e4-485b-8db6-37af50a0aecc}.
2024-10-03 16:57:56.897 +02:00 [DBG] Considering key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} with expiration date 2024-10-08 20:02:23Z as default key.
2024-10-03 16:57:56.899 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:57:56.900 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-10-03 16:57:56.902 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-10-03 16:57:56.905 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-10-03 16:57:56.907 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-10-03 16:57:56.910 +02:00 [DBG] Using key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} as the default key.
2024-10-03 16:57:56.911 +02:00 [DBG] Key ring with default key {d3fee60e-e7e4-485b-8db6-37af50a0aecc} was loaded during application startup.
2024-10-03 16:57:56.961 +02:00 [INF] Now listening on: https://localhost:7154
2024-10-03 16:57:56.962 +02:00 [DBG] Loaded hosting startup assembly GoodBadHabitsTracker.WebApi
2024-10-03 16:57:56.963 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-10-03 16:57:56.964 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-10-03 16:57:56.965 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-03 16:57:56.965 +02:00 [INF] Hosting environment: Production
2024-10-03 16:57:56.966 +02:00 [INF] Content root path: F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi
2024-10-03 16:57:56.966 +02:00 [DBG] Hosting started
2024-10-03 16:57:56.989 +02:00 [DBG] Connection id "0HN73NF237PSH" received FIN.
2024-10-03 16:57:56.989 +02:00 [DBG] Connection id "0HN73NF237PSG" received FIN.
2024-10-03 16:57:56.993 +02:00 [DBG] Connection id "0HN73NF237PSG" accepted.
2024-10-03 16:57:56.993 +02:00 [DBG] Connection id "0HN73NF237PSH" accepted.
2024-10-03 16:57:56.994 +02:00 [DBG] Connection id "0HN73NF237PSG" started.
2024-10-03 16:57:56.995 +02:00 [DBG] Connection id "0HN73NF237PSH" started.
2024-10-03 16:57:57.000 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:57:57.000 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:57:57.007 +02:00 [DBG] Connection id "0HN73NF237PSG" stopped.
2024-10-03 16:57:57.007 +02:00 [DBG] Connection id "0HN73NF237PSH" stopped.
2024-10-03 16:57:57.008 +02:00 [DBG] Connection id "0HN73NF237PSG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:57:57.008 +02:00 [DBG] Connection id "0HN73NF237PSH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:58:48.844 +02:00 [DBG] Connection id "0HN73NF237PSI" accepted.
2024-10-03 16:58:48.844 +02:00 [DBG] Connection id "0HN73NF237PSI" received FIN.
2024-10-03 16:58:48.845 +02:00 [DBG] Connection id "0HN73NF237PSI" started.
2024-10-03 16:58:48.845 +02:00 [DBG] Connection id "0HN73NF237PSJ" accepted.
2024-10-03 16:58:48.847 +02:00 [DBG] Connection id "0HN73NF237PSJ" started.
2024-10-03 16:58:48.846 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-10-03 16:58:48.849 +02:00 [DBG] Connection id "0HN73NF237PSI" stopped.
2024-10-03 16:58:48.850 +02:00 [DBG] Connection id "0HN73NF237PSI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-10-03 16:58:48.862 +02:00 [DBG] Connection 0HN73NF237PSJ established using the following protocol: "Tls13"
2024-10-03 16:58:48.877 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - null null
2024-10-03 16:58:48.882 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-10-03 16:58:48.885 +02:00 [DBG] The host 'localhost' is excluded. Skipping HSTS header.
2024-10-03 16:58:48.895 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:58:48.897 +02:00 [DBG] Endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)' with route pattern 'api/Habits/{id}' is valid for the request path '/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33'
2024-10-03 16:58:48.898 +02:00 [DBG] Request matched endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:58:48.910 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-10-03 16:58:48.912 +02:00 [INF] Executing endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:58:48.924 +02:00 [INF] Route matched with {Controller = "Habits", action = "GetById"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Threading.CancellationToken) on controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi).
2024-10-03 16:58:48.926 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-10-03 16:58:48.926 +02:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2024-10-03 16:58:48.928 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-10-03 16:58:48.929 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-10-03 16:58:48.930 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2024-10-03 16:58:48.932 +02:00 [DBG] Executing controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:58:48.933 +02:00 [DBG] Executed controller factory for controller GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>> (GoodBadHabitsTracker.WebApi)
2024-10-03 16:58:48.936 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-10-03 16:58:48.938 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-10-03 16:58:48.939 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:58:48.939 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-10-03 16:58:48.940 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-10-03 16:58:48.942 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-10-03 16:58:48.943 +02:00 [DBG] Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:58:48.944 +02:00 [DBG] Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:58:48.944 +02:00 [DBG] Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2024-10-03 16:58:48.945 +02:00 [DBG] Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2024-10-03 16:58:49.004 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-10-03 16:58:49.281 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2024-10-03 16:58:49.283 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2024-10-03 16:58:49.431 +02:00 [DBG] Entity Framework Core 8.0.7 initialized 'HabitsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.7' with options: QuerySplittingBehavior=SplitQuery 
2024-10-03 16:58:49.457 +02:00 [DBG] Compiling query expression: 
'DbSet<Habit>().FromSql([dbo].[GetHabitById] @Id, __p_0)
'
2024-10-03 16:58:49.474 +02:00 [DBG] Including navigation: 'Habit.Comments'.
2024-10-03 16:58:49.475 +02:00 [DBG] Including navigation: 'Habit.DayResults'.
2024-10-03 16:58:49.587 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<Habit>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Habit.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Habit.Frequency (Frequencies) Required, 1], [Property: Habit.GroupId (Guid) Required FK Index, 2], [Property: Habit.HabitType (HabitTypes) Required, 3], [Property: Habit.IconPath (string) Required, 4], [Property: Habit.IsTimeBased (bool?), 5], [Property: Habit.Name (string) Required, 6], [Property: Habit.Quantity (int?), 7], [Property: Habit.ReminderTimes (List<TimeOnly>) Required Element type: TimeOnly Required, 8], [Property: Habit.RepeatDaysOfMonth (List<int>) Required Element type: int Required, 9], [Property: Habit.RepeatDaysOfWeek (List<string>) Required Element type: string Required, 10], [Property: Habit.RepeatInterval (int) Required, 11], [Property: Habit.RepeatMode (RepeatModes) Required, 12], [Property: Habit.StartDate (DateOnly) Required, 13], [Property: Habit.UserId (Guid) Required FK Index, 14] }
            1 -> 0
        SELECT g.Id, g.Frequency, g.GroupId, g.HabitType, g.IconPath, g.IsTimeBased, g.Name, g.Quantity, g.ReminderTimes, g.RepeatDaysOfMonth, g.RepeatDaysOfWeek, g.RepeatInterval, g.RepeatMode, g.StartDate, g.UserId
        FROM [dbo].[GetHabitById] @Id
        ORDER BY g.Id ASC), 
    ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<int>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<Guid> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, Habit>, 
    Action<QueryContext, IExecutionStrategy, SplitQueryResultCoordinator>, 
    null, 
    GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext, 
    False, 
    False, 
    True
)'
2024-10-03 16:58:49.600 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GoodBadHabitsTracker.Infrastructure.Persistance.HabitsDbContext'.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-10-03 16:58:49.610 +02:00 [INF] Executed action GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi) in 677.1295ms
2024-10-03 16:58:49.612 +02:00 [INF] Executed endpoint 'GoodBadHabitsTracker.WebApi.Controllers.GenericController<GoodBadHabitsTracker.Core.Models.Habit.Habit, GoodBadHabitsTracker.Application.DTOs.Habit.Request.HabitRequest, GoodBadHabitsTracker.Application.DTOs.Habit.Response.GenericResponse<GoodBadHabitsTracker.Core.Models.Habit.Habit>>.GetById (GoodBadHabitsTracker.WebApi)'
2024-10-03 16:58:49.613 +02:00 [ERR] Exception occurred: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
System.InvalidOperationException: 'FromSql' or 'SqlQuery' was called with non-composable SQL and with a query composing over it. Consider calling 'AsEnumerable' after the method to perform the composition on the client side.
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.CheckComposableSqlTrimmed(ReadOnlySpan`1 sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.CheckComposableSql(String sql)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitFromSql(FromSqlExpression fromSqlExpression)
   at Microsoft.EntityFrameworkCore.Query.SqlExpressionVisitor.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerQuerySqlGenerator.VisitExtension(Expression extensionExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.<VisitSelect>b__21_1(TableExpressionBase e)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateList[T](IReadOnlyList`1 items, Action`1 generationAction, Action`1 joinAction)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.VisitSelect(SelectExpression selectExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GenerateRootCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.QuerySqlGenerator.GetCommand(Expression queryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalCommandCache.GetRelationalCommandTemplate(IReadOnlyDictionary`2 parameters)
   at Microsoft.EntityFrameworkCore.Internal.RelationCommandCacheExtensions.RentAndPopulateRelationalCommand(RelationalCommandCache relationalCommandCache, RelationalQueryContext queryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__22_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at GoodBadHabitsTracker.Infrastructure.Repositories.GenericRepository`1.ReadByIdAsync(Guid id, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Queries.Generic.ReadById.ReadByIdQueryHandler`1.Handle(ReadByIdQuery`1 query, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at GoodBadHabitsTracker.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.Application\Behaviors\ValidationBehavior.cs:line 39
   at GoodBadHabitsTracker.WebApi.Controllers.GenericController`3.GetById(Guid id, CancellationToken cancellationToken) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Controllers\GenericController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at GoodBadHabitsTracker.WebApi.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in F:\Programowanie\PROJEKTY\gbht\good-bad-habits-tracker\GoodBadHabitsTracker.WebApi\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-10-03 16:58:49.643 +02:00 [ERR] HTTP GET /api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 responded 500 in 758.7099 ms
2024-10-03 16:58:49.644 +02:00 [DBG] Connection id "0HN73NF237PSJ" completed keep alive response.
2024-10-03 16:58:49.647 +02:00 [DBG] 'HabitsDbContext' disposed.
2024-10-03 16:58:49.655 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7154/api/Habits/357e2e88-46ef-4695-834e-f2c527357b33 - 500 null application/json; charset=utf-8 778.6119ms
